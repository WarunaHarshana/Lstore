<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Lakshan Stores offers a wide range of groceries, fresh produce, and household essentials in Akuramboda, Pallepola. Your friendly local store for daily needs, with convenient home delivery.">
    <title>Lakshan Stores - Your Friendly Local Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f8f8;
            /* Ensure no horizontal scroll */
            overflow-x: hidden;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #a1a1aa; /* Gray 400 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #71717a; /* Gray 600 */
        }
        /* Responsive iframe container for the map */
        .map-container {
            position: relative;
            padding-bottom: 75%; /* 4:3 Aspect Ratio (change this to 56.25% for 16:9) */
            height: 0;
            overflow: hidden;
            border-radius: 0.75rem; /* rounded-xl */
        }
        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        /* Custom animation for fade-in-up */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out forwards;
        }
        .animate-fade-in-up.delay-200 {
            animation-delay: 0.2s;
        }
        .animate-fade-in-up.delay-400 {
            animation-delay: 0.4s;
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="bg-orange-600 text-white shadow-lg py-3 px-4 md:py-4 md:px-12 fixed top-0 left-0 w-full z-50">
        <div class="container mx-auto flex items-center justify-between">
            <div class="text-2xl md:text-3xl font-bold">Lakshan Stores</div>
            
            <button id="mobile-menu-button" class="md:hidden text-white focus:outline-none">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>

            <nav class="hidden md:block">
                <ul class="flex space-x-6 text-sm md:text-base">
                    <li><a href="#home" class="hover:text-orange-100 transition-colors duration-300">Home</a></li>
                    <li><a href="#about" class="hover:text-orange-100 transition-colors duration-300">අප ගැන</a></li>
                    <li><a href="#products-glimpse" class="hover:text-orange-100 transition-colors duration-300">Gallery</a></li>
                    <li><a href="#contact" class="hover:text-orange-100 transition-colors duration-300">Contact</a></li>
                </ul>
            </nav>
        </div>

        <div class="md:hidden">
            <p class="text-base font-light italic text-center mt-1">Your Friendly Local Store.</p>
            <nav id="mobile-menu" class="hidden mt-2 w-full bg-orange-600 shadow-lg py-2">
                <ul class="flex flex-col space-y-2 text-sm text-center">
                    <li><a href="#home" class="block py-2 px-4 hover:bg-orange-500 rounded transition-colors duration-300">Home</a></li>
                    <li><a href="#about" class="block py-2 px-4 hover:bg-orange-500 rounded transition-colors duration-300">අප ගැන</a></li>
                    <li><a href="#products-glimpse" class="block py-2 px-4 hover:bg-orange-500 rounded transition-colors duration-300">Gallery</a></li>
                    <li><a href="#contact" class="block py-2 px-4 hover:bg-orange-500 rounded transition-colors duration-300">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
                mobileMenu.classList.toggle('block');
            });

            // Close menu when a link is clicked (for single-page navigation)
            mobileMenu.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 768) { // Only close on mobile
                        mobileMenu.classList.add('hidden');
                        mobileMenu.classList.remove('block');
                    }
                });
            });
        });
    </script>

    <section id="home" class="relative bg-gradient-to-r from-orange-500 to-orange-700 text-white py-16 md:py-32 overflow-hidden shadow-xl pt-24 md:pt-32">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between px-4 md:px-12">
            <div class="text-center md:text-left mb-8 md:mb-0 md:w-1/2">
                <h1 class="text-3xl md:text-6xl font-extrabold leading-tight mb-3 animate-fade-in-up">
                    Fresh Groceries & Essentials, Delivered Fast!
                </h1>
                <p class="text-base md:text-xl mb-6 opacity-90 animate-fade-in-up delay-200">
                    Get your essentials delivered right to your home, with a friendly smile!
                </p>
                <div class="flex flex-col sm:flex-row justify-center md:justify-start gap-3 animate-fade-in-up delay-400">
                    <a href="https://wa.me/94761683984" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-green-500 text-white font-bold py-3 px-6 sm:px-8 rounded-full shadow-xl hover:bg-green-600 transition-all duration-300 transform hover:scale-105 text-base">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="inline-block mr-2 bi bi-whatsapp" viewBox="0 0 16 16">  <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"/></svg>
                        Chat on WhatsApp
                    </a>
                </div>
            </div>
            <div class="md:w-1/2 flex justify-center md:justify-end mt-8 md:mt-0">
                <img src="https://lh3.googleusercontent.com/gps-cs-s/AC9h4nrFvTy5EdYm5OSdFbBdJhsJK4mJ8VGod3Q1jSSzspiCSUyw02DUrnetCk-2SJaIU8WAeKup4wQCNGCSCnI2ipopxnd79_qKemMnkLtTtLzavgd_D9OMUsf2zMJ6hlB4KqucBIFK=s680-w680-h510-rw" alt="Exterior view of Lakshan Stores, showing the storefront and signage." class="rounded-xl shadow-2xl max-w-full h-auto transform rotate-3 hover:rotate-0 transition-transform duration-500">
            </div>
        </div>
    </section>

    <section id="about" class="py-12 md:py-24 bg-gradient-to-r from-orange-50 to-orange-100 px-4 md:px-12">
        <div class="container mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-orange-600 mb-8 md:mb-12">අප ගැන</h2>
            <div class="flex flex-col md:flex-row items-center gap-8 md:gap-10">
                <div class="md:w-1/2">
                    <img src="https://lh3.googleusercontent.com/gps-cs-s/AC9h4nqOgKYn2cIPobv_PZSU0Eb34w_gshIYCzhdY76SM6O3jSWok_eFe9H042dI0eL43rP_9c89is2d3Um0W7UN3yPnZiOV1tkZ5m5zRDnMmyWknJRz4S7z-v51rxVCIoR_LdlkG2a7=s680-w680-h510-rw" alt="Interior view of Lakshan Stores, showcasing product shelves and a welcoming atmosphere." class="rounded-xl shadow-lg w-full h-auto transform rotate-3 hover:rotate-0 transition-transform duration-500">
                </div>
                <div class="md:w-1/2 text-base md:text-lg leading-relaxed text-gray-700">
                    <p class="mb-4">
                        ලක්ෂාන් ස්ටෝර්ස් යනු ඔබේ දෛනික අත්‍යවශ්‍ය ද්‍රව්‍ය පහසුවෙන් ඔබේ ස්ථානයටම ලබා දෙන ඔබේ කැපවූ සහකරු වේ. ගබඩාවට පැමිණීමේ අපහසුතාවයකින් තොරව ඔබේ අවශ්‍යතා සපුරාලීමට අවධානය යොමු කරමින්, විශ්වාසනීය සේවාවක් සැපයීමට අපි විශේෂඥයෝ වෙමු.
                    </p>
                    <p>
                        ඔබට අවශ්‍ය නිෂ්පාදන ඔබේ නිවසටම ගෙන්වා ගැනීමට බාධාවකින් තොර සහ කාර්යක්ෂම ක්‍රමයක් සැපයීමට අපගේ කැපවීමයි. විශ්වාසනීය සේවාවක් සහ පාරිභෝගික පහසුව පිළිබඳව අපි ආඩම්බර වෙමු.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="products-glimpse" class="py-12 md:py-24 bg-gradient-to-r from-orange-100 to-orange-200 px-4 md:px-12">
        <div class="container mx-auto">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-orange-600 mb-8 md:mb-12">Explore Our Products</h2>
            <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8">
                <!-- Products will be loaded here by JavaScript -->
            </div>
        </div>
    </section>

    <section id="contact" class="py-12 md:py-24 bg-gradient-to-r from-orange-200 to-orange-300 px-4 md:px-12">
        <div class="container mx-auto text-center">
            <h2 class="text-3xl md:text-4xl font-bold text-orange-600 mb-8 md:mb-12">Let's Connect!</h2>
            <div class="flex flex-col md:flex-row justify-center items-center gap-8 md:gap-10">
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-300 md:w-1/2 lg:w-1/3">
                    <h3 class="text-xl md:text-2xl font-semibold mb-3 md:mb-4 text-orange-700">Our Details</h3>
                    <p class="text-base mb-2 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-geo-alt-fill w-5 h-5 mr-2 text-orange-500" viewBox="0 0 16 16">
                            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/>
                        </svg>
                        No 190, Ethpetiyawa,
                    </p>
                    <p class="text-base mb-2">Akuramboda, Pallepola 21142, Sri Lanka</p>
                    <p class="text-base mb-4 flex items-center justify-center"><svg class="w-5 h-5 mr-2 text-orange-500" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.774a11.037 11.037 0 006.103 6.103l.774-1.548a1 1 0 011.06-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.823 18 2 12.177 2 5V3z"></path></svg>076 168 3984</p>
                    <p class="text-base font-semibold text-orange-500 mb-4">Open Daily: Until 8:00 PM</p>
                    <a href="https://wa.me/94761683984" target="_blank" rel="noopener noreferrer" class="inline-flex items-center justify-center bg-green-500 text-white font-bold py-2 px-6 rounded-full shadow-lg hover:bg-green-600 transition-all duration-300 text-base">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="inline-block mr-2 bi bi-whatsapp" viewBox="0 0 16 16">  <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"/></svg>
                        Chat on WhatsApp
                    </a>
                </div>
                <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-300 md:w-1/2 lg:w-1/3 mt-8 md:mt-0">
                    <h3 class="text-xl md:text-2xl font-semibold mb-3 md:mb-4 text-orange-700">Find Us Here!</h3>
                    <div class="map-container rounded-xl shadow-md">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3954.276667862802!2d80.60180919999999!3d7.653371600000001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae34deb9d28a429%3A0x14d697a92f12b6b8!2sLakshan%20Stores!5e0!3m2!1sen!2slk!4v1748331173273!5m2!1sen!2slk" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                    <p class="text-sm text-gray-600 mt-3 md:mt-4">Click on the map for directions.</p>
                </div>
            </div>
        </div>
    </section>

    <section id="cart-section" class="py-12 md:py-16 bg-gray-100 px-4 md:px-12">
        <div class="container mx-auto">
            <h2 class="text-2xl md:text-3xl font-bold text-center text-orange-600 mb-8">Your Shopping Cart</h2>
            <div id="cart-items-container" class="bg-white shadow-md rounded-lg p-6">
                <!-- Cart items will be dynamically inserted here -->
                <p id="cart-empty-message" class="text-gray-500 text-center">Your cart is currently empty.</p>
            </div>
            <div id="cart-summary" class="mt-6 text-right">
                <p class="text-xl font-semibold text-gray-700">Total: $<span id="cart-total">0.00</span></p>
                <button id="send-whatsapp-btn" class="hidden mt-4 bg-green-500 text-white font-bold py-3 px-6 rounded-full shadow-lg hover:bg-green-600 transition-colors duration-300 flex items-center justify-center mx-auto sm:mr-0 sm:ml-auto">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="inline-block mr-2 bi bi-whatsapp" viewBox="0 0 16 16">  <path d="M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"/></svg>
                    Send Order via WhatsApp
                </button>
            </div>
        </div>
    </section>

    <footer class="bg-gray-800 text-white py-6 px-4 md:py-8 md:px-12">
        <div class="container mx-auto text-center">
            <p class="text-xs md:text-sm">© 2025 Lakshan Stores. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const productGrid = document.getElementById('product-grid');
            const cartItemsContainer = document.getElementById('cart-items-container');
            const cartEmptyMessage = document.getElementById('cart-empty-message');
            const cartTotalSpan = document.getElementById('cart-total');
            const sendWhatsAppBtn = document.getElementById('send-whatsapp-btn');
            
            let cart = [];
            let allProducts = [];

            function loadCart() {
                cart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
                renderCart(); 
            }

            function saveCart() {
                localStorage.setItem('shoppingCart', JSON.stringify(cart));
            }

            function renderCart() {
                cartItemsContainer.innerHTML = ''; // Clear existing items
                let overallTotal = 0;

                if (cart.length === 0) {
                    cartEmptyMessage.classList.remove('hidden');
                    cartItemsContainer.appendChild(cartEmptyMessage); 
                    sendWhatsAppBtn.classList.add('hidden'); // Hide WhatsApp button if cart is empty
                } else {
                    cartEmptyMessage.classList.add('hidden');
                    sendWhatsAppBtn.classList.remove('hidden'); // Show WhatsApp button if cart has items
                    cart.forEach(item => {
                        const itemSubtotal = item.price * item.quantity;
                        overallTotal += itemSubtotal;
                        const cartItemElement = document.createElement('div');
                        cartItemElement.classList.add('flex', 'flex-wrap', 'justify-between', 'items-center', 'py-3', 'border-b', 'border-gray-200');
                        cartItemElement.innerHTML = `
                            <div class="w-full sm:w-2/5 mb-2 sm:mb-0">
                                <p class="font-semibold text-orange-700">${item.name}</p>
                                <p class="text-sm text-gray-600">Price: $${item.price.toFixed(2)}</p>
                            </div>
                            <div class="w-auto sm:w-1/5 flex items-center justify-start sm:justify-center mb-2 sm:mb-0">
                                <button data-id="${item.id}" class="decrement-qty text-orange-500 hover:text-orange-700 font-bold py-1 px-2 rounded hover:bg-orange-100">-</button>
                                <span class="mx-2 text-center w-8">${item.quantity}</span>
                                <button data-id="${item.id}" class="increment-qty text-orange-500 hover:text-orange-700 font-bold py-1 px-2 rounded hover:bg-orange-100">+</button>
                            </div>
                            <div class="w-auto sm:w-1/5 text-left sm:text-center font-semibold text-gray-700 mb-2 sm:mb-0">
                                $${itemSubtotal.toFixed(2)}
                            </div>
                            <div class="w-full sm:w-1/5 text-right">
                                <button data-id="${item.id}" class="remove-item text-red-500 hover:text-red-700 text-sm font-medium">Remove</button>
                            </div>
                        `;
                        cartItemsContainer.appendChild(cartItemElement);
                    });
                }
                cartTotalSpan.textContent = overallTotal.toFixed(2);
                console.log('Cart rendered:', cart);
            }

            function addToCart(productId, buttonElement) {
                const productIdNum = parseInt(productId);
                const productToAdd = allProducts.find(p => p.id === productIdNum);
                if (!productToAdd) return;

                const existingProductIndex = cart.findIndex(item => item.id === productIdNum);
                if (existingProductIndex > -1) {
                    cart[existingProductIndex].quantity += 1;
                } else {
                    cart.push({ id: productIdNum, name: productToAdd.name, price: productToAdd.price, quantity: 1 });
                }
                saveCart();
                renderCart();

                // Feedback on button
                if (buttonElement) {
                    const originalText = buttonElement.innerHTML;
                    buttonElement.innerHTML = 'Added!';
                    buttonElement.classList.add('bg-green-500', 'hover:bg-green-600');
                    buttonElement.classList.remove('bg-orange-500', 'hover:bg-orange-600');
                    setTimeout(() => {
                        buttonElement.innerHTML = originalText;
                        buttonElement.classList.remove('bg-green-500', 'hover:bg-green-600');
                        buttonElement.classList.add('bg-orange-500', 'hover:bg-orange-600');
                    }, 1500);
                }
            }

            function updateQuantity(productId, newQuantity) {
                const productIdNum = parseInt(productId);
                const itemIndex = cart.findIndex(item => item.id === productIdNum);
                if (itemIndex > -1) {
                    if (newQuantity <= 0) {
                        cart.splice(itemIndex, 1); // Remove item if quantity is 0 or less
                    } else {
                        cart[itemIndex].quantity = newQuantity;
                    }
                    saveCart();
                    renderCart();
                }
            }

            function removeFromCart(productId) {
                const productIdNum = parseInt(productId);
                cart = cart.filter(item => item.id !== productIdNum);
                saveCart();
                renderCart();
            }

            function generateWhatsAppMessage() {
                let message = "Hello Lakshan Stores, I'd like to place an order:\n\n";
                let overallTotal = 0;
                cart.forEach(item => {
                    const itemSubtotal = item.price * item.quantity;
                    overallTotal += itemSubtotal;
                    message += `- ${item.name} (${item.quantity}) @ $${item.price.toFixed(2)} each = $${itemSubtotal.toFixed(2)}\n`;
                });
                message += `\nTotal Order Value: $${overallTotal.toFixed(2)}`;
                return message;
            }

            function sendCartToWhatsApp() {
                if (cart.length === 0) {
                    alert("Your cart is empty. Please add items before sending.");
                    return;
                }
                const phoneNumber = "94761683984"; // Replace with your actual number
                const message = generateWhatsAppMessage();
                const encodedMessage = encodeURIComponent(message);
                const url = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
                window.open(url, '_blank');
            }
            
            function attachAddToCartListeners() {
                const addToCartButtons = document.querySelectorAll('.add-to-cart-btn');
                addToCartButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        addToCart(this.dataset.productId, this); // Pass the button element
                    });
                });
            }

            cartItemsContainer.addEventListener('click', function(event) {
                const target = event.target;
                const productId = target.dataset.id;
                if (!productId) return;

                if (target.classList.contains('increment-qty')) {
                    const item = cart.find(i => i.id === parseInt(productId));
                    if(item) updateQuantity(productId, item.quantity + 1);
                } else if (target.classList.contains('decrement-qty')) {
                    const item = cart.find(i => i.id === parseInt(productId));
                    if(item) updateQuantity(productId, item.quantity - 1);
                } else if (target.classList.contains('remove-item')) {
                    removeFromCart(productId);
                }
            });

            sendWhatsAppBtn.addEventListener('click', sendCartToWhatsApp);

            loadCart(); // Load and render cart on page load

            fetch('products.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok ' + response.statusText);
                    }
                    return response.json();
                })
                .then(productsData => {
                    allProducts = productsData; // Store fetched products
                    productsData.forEach(product => {
                        const productCard = `
                            <div class="bg-white rounded-xl shadow-md overflow-hidden transform hover:scale-105 transition-transform duration-300">
                                <img src="${product.image}" alt="${product.name}" class="w-full h-48 md:h-64 object-cover">
                                <div class="p-3 md:p-4 text-center">
                                    <h3 class="text-lg font-semibold text-orange-700">${product.name}</h3>
                                    <p class="text-base text-gray-800 mt-1">$${product.price.toFixed(2)}</p>
                                    <button data-product-id="${product.id}" class="add-to-cart-btn mt-3 bg-orange-500 text-white font-bold py-2 px-4 rounded-full hover:bg-orange-600 active:bg-orange-700 transition-colors duration-300">Add to Cart</button>
                                </div>
                            </div>
                        `;
                        productGrid.innerHTML += productCard;
                    });
                    attachAddToCartListeners(); // Attach listeners after products are rendered
                })
                .catch(error => {
                    console.error('Error fetching or processing products:', error);
                    productGrid.innerHTML = '<p class="text-center text-red-600 bg-red-100 p-4 rounded-md col-span-full">Failed to load products. Please try again later.</p>';
                });
        });
    </script>
</body>
</html>
